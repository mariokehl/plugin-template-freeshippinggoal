function FreeShippingGoal(e){this.itemSum=e,this.getConfig=function(){return JSON.parse(document.getElementById("free-shipping-config").textContent)},this.getGrossValue=function(){return this.getConfig().grossValue},this.getItemSum=function(){if("number"==typeof this.itemSum)return this.itemSum;return this.getConfig().initialData.amount},this.getGoalReachedMessage=function(){const e=this.getConfig();return e.icons.goal+"&nbsp;"+e.messages.goal},this.getMissingMessage=function(e){const t=this.getConfig();let i=t.messages.missing;return i=(i=i.replace(":amount",Intl.NumberFormat("de-DE",{maximumFractionDigits:2,minimumFractionDigits:2}).format(e))).replace(":currency",t.currency)},this.calc=function(){let e;const t=this.getGrossValue()-this.getItemSum();e=t<=0?this.getGoalReachedMessage():this.getMissingMessage(t);let i=this.getItemSum()/this.getGrossValue()*100;i=(i=Math.floor(i))>100?100:i;const n=document.querySelectorAll('[role="progressbar"]')[0];return n.setAttribute("aria-valuenow",i),n.style.width=i+"%",e},this.setLabel=function(){const e=document.getElementsByClassName("free-shipping-missing-amount");if(e.length){const t=this;Array.prototype.forEach.call(e,function(e){e.innerHTML=t.calc()})}}}window.addEventListener("load",()=>{new FreeShippingGoal(null).setLabel()},!1),document.addEventListener("afterBasketChanged",e=>{new FreeShippingGoal(e.detail.itemSum).setLabel()},!1);